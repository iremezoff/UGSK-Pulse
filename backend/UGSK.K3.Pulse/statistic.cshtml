@model StatisticGainerEnvironment

$(function () {
            $.connection.hub.url = "@Model.ServiceAddress/pulse/signalr";

            var div2 = d3.select(document.getElementById('div2'));

            var rp2 = radialProgress(document.getElementById('div2'))
            .label("UAuto")
            .diameter(300)
            .fontSize(5);

            $.ajax({
            method: "GET",
            url: "@Model.ServiceAddress/pulse/api/counter",
            data: { product: "uauto"}
            })
            .done(function( counter ) {
            rp2.value(counter.Value);

            $.ajax({
            method: "GET",
            url: "@Model.ServiceAddress/pulse/api/index",
            data: { product: "uauto"}
            })
            .done(function( index ) {
            rp2.maxValue(index.Value);

            rp2.render();
            });

            });





            // Declare a proxy to reference the hub.
            var chat = $.connection.statisticHub;
            // Create a function that the hub can call to broadcast messages.
            chat.client.broadcastCounter = function (product, count) {
            rp2.value(count).render();
            };

            chat.client.broadcastIndex = function (product, value) {
            rp2.maxValue(value).render();
            };

            $.connection.hub.start();
            });

